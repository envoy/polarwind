import {
  Description,
  Meta,
  Preview,
  Props,
  Story,
} from "@storybook/addon-docs/blocks";
import { withSmartKnobs } from "storybook-addon-smart-knobs";
import { EmbeddedContext } from "../../utils/embedded";
import { Button } from "../Button";
import { ButtonGroup } from "../ButtonGroup";
import { Card } from "../Card";
import { DisplayText } from "../DisplayText";
import { FormLayout } from "../FormLayout";
import { Heading } from "../Heading";
import { Select } from "../Select";
import { Stack } from "../Stack";
import { Tabs } from "../Tabs";
import { TextField } from "../TextField";
import { Page } from "./Page";

<Meta
  component={Page}
  decorators={[withSmartKnobs({ ignoreProps: ["children", "titleAction"] })]}
  title="Components / Structure / Page"
/>

# Page

<Description of={Page} />

<Preview withToolbar>
  <Story name="Example">
    <Page
      breadcrumbs={[{ content: "Invites", url: "/invites" }]}
      tabs={
        <Tabs
          selected={0}
          tabs={[
            { content: "Single invite", id: "1" },
            { content: "Group invite", id: "2" },
          ]}
        />
      }
      title="New invite"
    >
      <FormLayout>
        <Select
          label="Visitor type"
          options={["Visitor", "Interview", "Meeting"]}
          required
        />
        <TextField label="Full name" />
        <TextField label="Private notes" multiline={3} />
        <Stack distribution="equalSpacing">
          <ButtonGroup>
            <Button>Invite</Button>
            <Button outline>Invite and add another</Button>
          </ButtonGroup>
          <Button plain>Cancel</Button>
        </Stack>
      </FormLayout>
    </Page>
  </Story>
</Preview>

<Props of={Page} />

## Usage

### Default page

Use for detail pages, which should have pagination and breadcrumbs, and also often have
several actions.

### Page with breadcrumb

Use when you want to present the user with a quick way to navigate where they came from.

<Preview>
  <Story name="Page with breadcrumb">
    <Page
      breadcrumbs={[{ content: "Invites", url: "/invites" }]}
      title="New invite"
    />
  </Story>
</Preview>

### Page with title action

Use when exposing additional components on the right of the page title.

<Preview>
  <Story name="Page with title action">
    <Page
      title="10 visitors"
      titleAction={
        <Stack spacing="extraLoose">
          <TextField label="Search" type="search" />
          <Button>New visitor</Button>
        </Stack>
      }
    />
  </Story>
</Preview>

### Standalone page

When building a standalone app, page gets rounded borders and a background wrapper.

<Preview>
  <Story name="Standalone">
    <EmbeddedContext.Provider value={false}>
      <Page title="Standalone page" />
    </EmbeddedContext.Provider>
  </Story>
</Preview>

### Without title

When building an embedded plugin, omit the entire title prop to remove the header. Any
breadcrumb and title actions that you define will not be rendered too.

<Preview>
  <Story name="Without title">
    <Page>
      <FormLayout>
        <Select
          label="Visitor type"
          options={["Visitor", "Interview", "Meeting"]}
          required
        />
      </FormLayout>
    </Page>
  </Story>
</Preview>

### Transparent page

An alternate variant of pages are the transparent pages, typically found on pages where
the primary intent is data display. These pages will not be wrapped in a shadowed white
background.

<Preview>
  <Story name="Transparent">
    <div style={{ backgroundColor: "#f6f6f9" }}>
      <Page
        title="Deliveries analytics"
        titleAction={
          <Stack alignment="trailing">
            <Select
              label="Delivery area"
              labelHidden
              options={["All delivery areas"]}
            />
            <Select label="Date range" labelHidden options={["Last 7 days"]} />
            <Button outline>Export</Button>
          </Stack>
        }
        transparent
      >
        <Stack distribution="fillEvenly" spacing="extraLoose">
          <Stack distribution="fillEvenly" spacing="extraLoose" wrap={false}>
            <Card shadow>
              <Stack vertical>
                <Heading element="h3" secondary>
                  Deliveries scanned
                </Heading>
                <DisplayText secondary size="extraLarge">
                  57
                </DisplayText>
              </Stack>
            </Card>
            <Card shadow>
              <Stack vertical>
                <Heading element="h3" secondary>
                  Avg deliveries/week
                </Heading>
                <DisplayText secondary size="extraLarge">
                  57
                </DisplayText>
              </Stack>
            </Card>
          </Stack>
          <Stack distribution="fillEvenly" spacing="extraLoose" wrap={false}>
            <Card shadow>
              <Stack vertical>
                <Heading element="h3" secondary>
                  Total hours saved
                </Heading>
                <DisplayText secondary size="extraLarge">
                  50
                </DisplayText>
              </Stack>
            </Card>
            <Card shadow>
              <Stack vertical>
                <Heading element="h3" secondary>
                  Avg time to pick-up
                </Heading>
                <DisplayText secondary size="extraLarge">
                  35h:45m
                </DisplayText>
              </Stack>
            </Card>
          </Stack>
        </Stack>
      </Page>
    </div>
  </Story>
</Preview>
