import {
  Description,
  Meta,
  Preview,
  Props,
  Story,
} from "@storybook/addon-docs/blocks";
import { useState } from "react";
import { withSmartKnobs } from "storybook-addon-smart-knobs";
import { Stack } from "../Stack";
import { TextField } from "./TextField";

<Meta
  component={TextField}
  decorators={[
    withSmartKnobs({ ignoreProps: ["children", "value", "helpText"] }),
  ]}
  title="Components / Forms / Text field"
/>

# Text field

<Description of={TextField} />

<Preview withToolbar>
  <Story name="Text field">
    {() => {
      const [value, setValue] = useState("Esteban Arango");
      // prettier-ignore
      return <TextField helpText="Help me out" label="Name" required value={value} onChange={setValue} />
    }}
  </Story>
</Preview>

<Props of={TextField} />

# Usage

## Text field with validation error

When the `error` prop is set, the field will display an error state. The error message
will take precedence over the `success` and `helpText` if set.

<Preview>
  <Story name="Text field with validation error">
    <TextField
      error="Name can't be empty"
      helpText="Help me out"
      label="Name" // not shown
      required // not shown
      success="Saved"
    />
  </Story>
</Preview>

## Text field with success

When the `success` prop is set, the field will display the success message below the
field. The success message will take precedence over the `helpText` if set.

<Preview>
  <Story name="Text field with success">
    <TextField
      helpText="Help me out"
      label="Name"
      success="Saved" // not shown
    />
  </Story>
</Preview>

## Search field

Search fields automatically get the rounded borders and hidden label. You will still need
to set the `label` prop which will be used for the placeholder instead. Screen readers
will still be able to read the visually hidden label.

<Preview>
  <Story name="Search field">
    <TextField label="Search" type="search" />
  </Story>
</Preview>

## Focused state

Forces the focused state of the text fields.

<Preview>
  <Story name="Focused">
    <Stack vertical>
      <TextField focused label="Name" />
      <TextField error="Bad news" focused label="Name" />
      <TextField focused label="Search" type="search" />
    </Stack>
  </Story>
</Preview>

## Disabled state

The disabled state makes an input read-only. In the unlikely scenario where a validation
error input is also disabled, the disabled state overrides the error state.

<Preview>
  <Story name="Disabled">
    <Stack distribution="equalSpacingAround" vertical>
      <TextField
        disabled
        focused
        label="Input with a value"
        value="Hello, world"
      />
      <TextField
        disabled
        error="Username can't be empty"
        focused
        helpText="Choose a unique username"
        label="Username (with error)"
      />
      <TextField disabled focused label="Search" type="search" />
    </Stack>
  </Story>
</Preview>

## Multiline text field

Use when the expected input could be more than one line. The field will automatically grow
to accommodate additional text.

<Preview>
  <Story name="Multiline">
    <Stack vertical>
      <TextField
        helpText="Be as detailed as possible"
        label="Default multiline"
        multiline
      />
      <TextField label="Multiline set to a number" multiline={3} />
      <TextField
        error="Enter a valid address"
        label="Error multiline"
        multiline
      />
      <TextField
        disabled
        label="Disabled multiline"
        multiline
        value={`The default rows attribute is set to 2
but this textarea has an initial value
which will resize itself to fit
all four rows`}
      />
    </Stack>
  </Story>
</Preview>

### Hidden label

<Preview>
  <Story name="Hidden label">
    <TextField label="Name" labelHidden />
  </Story>
</Preview>
